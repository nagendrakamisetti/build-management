/*
 * Copyright 2000-2002 by Model N, Inc.  All Rights Reserved.
 * 
 * This software is the confidential and proprietary information
 * of Model N, Inc ("Confidential Information").  You shall not
 * disclose such Confidential Information and shall use it only
 * in accordance with the terms of the license agreement you
 * entered into with Model N, Inc.
 */
package com.modeln.build.common.tool;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.InputStream;
import java.io.IOException;
import java.util.Date;

/**
 * This class creates a separate thread for reading process output
 * generated by System.exec and displays it to the user. 
 */
public class CMnProcessOutput implements Runnable {

    /** Java process to collect output from */
    private Process process = null;

    /** Process stream being processed */
    private InputStream stream = null;


    /**
     * Construct the thread.
     *
     * @param  proc  Process to monitor for output 
     * @param  in    Input stream to be processed (stderr, stdout)
     */
    public CMnProcessOutput(Process proc, InputStream in) {
        process = proc;
        stream = in;
    }


    /**
     * Continuously monitor the process for output. 
     */
    public void run() {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(stream) );
            int ch;
            while ((ch = br.read()) != -1) {
                System.out.print((char) ch);
                System.out.flush();
            }
            br.close();
        } catch (IOException ioex) {
        }
    }

}

